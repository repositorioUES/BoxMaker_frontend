<div class="component-class">
    <div class="center-container">
      <div class="center-content">
        <h3><strong>MANTENIMIENTO DE USUARIOS </strong></h3>
        <mat-card class="custom-color component-class ">

            <table mat-table [dataSource] = "usuarios" class = "mat-elevation-z8 " > 

                <ng-container matColumnDef = "Permisos">
                    <th mat-header-cell *matHeaderCellDef>Permisos</th>
                     <td mat-cell *matCellDef = "let element">
                         <p align="center" style="margin: 0%;">
                             <button type="button" class="btn btn-primary" matTooltip="Gestionar Permisos de {{element.userName}}">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-shield-lock" viewBox="0 0 16 16">
                                     <path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"></path>
                                     <path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415z"></path>
                                 </svg>
                               </button>
                         </p>
                     </td>
                 </ng-container> 

                <ng-container matColumnDef = "Nombre">
                   <th mat-header-cell *matHeaderCellDef>Nombre</th>
                   <td mat-cell *matCellDef = "let element"> {{element.primerNombre}} {{element.segundoNombre}} </td>
                </ng-container>

                <ng-container matColumnDef = "Nombre de Usuario">
                   <th mat-header-cell *matHeaderCellDef>Nombre Usuario</th>
                   <td mat-cell *matCellDef = "let element"> {{element.userName}} </td>
                </ng-container>

                <ng-container matColumnDef = "Fec. Creación">
                   <th mat-header-cell *matHeaderCellDef>Fec. Creación</th>
                   <td mat-cell *matCellDef = "let element"> {{element.fechaCreacion | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <ng-container matColumnDef = "Estado">
                   <th mat-header-cell *matHeaderCellDef>Estado</th>
                   <td mat-cell *matCellDef = "let element" >
                        <p *ngIf="element.activo" style="margin: 0%;">
                            <button type="button" class="btn btn-success" (click)="changeState(element._id)" matTooltip="Cambiar estado de {{element.userName}}  Actualmente: ACTIVO">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-check" viewBox="0 0 16 16">
                                    <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"></path>
                                    <path d="M8.256 14a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"></path>
                                </svg>
                            </button>
                        </p>
                        <p *ngIf="!element.activo" style="margin: 0%;">
                            <button type="button" class="btn btn-outline-danger" (click)="changeState(element._id)" matTooltip="Cambiar estado de {{element.userName}}  Actualmente: INACTIVO">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-slash" viewBox="0 0 16 16">
                                    <path d="M13.879 10.414a2.501 2.501 0 0 0-3.465 3.465l3.465-3.465Zm.707.707-3.465 3.465a2.501 2.501 0 0 0 3.465-3.465Zm-4.56-1.096a3.5 3.5 0 1 1 4.949 4.95 3.5 3.5 0 0 1-4.95-4.95ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm.256 7a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"></path>
                                </svg>
                            </button>
                        </p>
                    </td>
                </ng-container>

                <ng-container matColumnDef = "Bloqueo">
                    <th mat-header-cell *matHeaderCellDef>Bloqueo</th>
                    <td mat-cell *matCellDef = "let element"> 
                        <p *ngIf="element.bloqueado" align="center" style="margin: 0%;">
                            <button type="button" class="btn btn-outline-danger" (click)="unlock(element._id)" matTooltip="{{element.userName}} Actualmente: BLOQUEADO">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
                                </svg>
                            </button>
                        </p>
                        <p *ngIf="!element.bloqueado" align="center" style="margin: 0%;">
                            <button type="button" class="btn btn-success" (click)="unlock(element._id)" matTooltip="{{element.userName}} Actualmente: DESBLOQUEADO">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-unlock" viewBox="0 0 16 16">
                                    <path d="M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2zM3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H3z"></path>
                                </svg>
                            </button>
                        </p>
                    </td>
                </ng-container> 

                <ng-container matColumnDef = "Contraseña">
                   <th mat-header-cell *matHeaderCellDef>Contraseña</th>
                    <td mat-cell *matCellDef = "let element">
                        <p align="center" style="margin: 0%;" (click)="resetPassword(element._id, element.userName)">
                            <button type="button" class="btn btn-outline-danger" matTooltip="Resetear Contraseña de {{element.userName}}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"></path>
                                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"></path>
                                </svg>
                            </button>
                        </p>
                    </td>
                </ng-container> 

                <ng-container matColumnDef = "Eliminar">
                    <th mat-header-cell *matHeaderCellDef>Eliminar</th>
                    <td mat-cell *matCellDef = "let element"> 
                        <p align="center" style="margin: 0%;"> 
                            <button type="button" class="btn btn-outline-danger" (click)="deleteUser(element._id, element.userName)" matTooltip="Eliminar a {{element.userName}}">
                                <svg  xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"></path>
                                    <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"></path>
                                </svg>
                            </button>
                        </p>
                    </td>
                </ng-container> 

                <tr mat-header-row style="height: 50px;" *matHeaderRowDef = "displayedColumns; sticky: true"></tr>
                <tr mat-row style="height: 50px;" *matRowDef = "let row; columns: displayedColumns;"></tr>
             </table>
        </mat-card>
    </div>
  </div>
</div>

